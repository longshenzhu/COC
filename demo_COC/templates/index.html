{%extends "base.html"%}
{%block title%}同校网{%endblock%}

{%block nav%}

{%endblock%}

{%block container%}
<div class="container-fluid" style="background-image:url('{{STATIC_URL}}img/background1.jpg'); height: 268px;">
	<div class="row-fluid" style="margin-top: 190px;">
		<div class="span4 offset4">
			<div class="row-fluid">
				<div class="span12 well-new">
					<form method="post" class="span6">
						{% csrf_token %}
						<div class="row-fluid">
							<input type="text" placeholder="邮箱" name="login_email" id="id_login_email" class="span12"/>
						</div>
						<div class="row-fluid">
							<input type="password" placeholder="密码" name="login_password" id="id_login_password" class="span12"/>
						</div>
						<div class="row-fluid">
							<div class="span4">
								<input type="checkbox" value="remember" name="remember_me" id="id_remember_me" style="margin-top: 0px">
								记住我 </input>
							</div>
							<div class="span4">
								<button class="btn btn-primary pull-right" type="submit">
									登录
								</button>
							</div>
							<div class="span4">
								<button class="btn btn-success pull-right" data-toggle="modal" type="submit" data-target="#myModal">
									注册
								</button>
								<input name="login" type="hidden" />
							</div>
						</div>
					</form>
					<div class="span6">
						<div class="left-new span12">
							<p>
								欢迎来到同校网！在这里你可以：
							</p>
							<p>
								+发现校园中丰富的社团活动
							</p>
							<p>
								+结识志趣相投的校内友邻
							</p>
							<p>
								+更加轻松地管理社团
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="container">
	<div class="slide row-fluid" id="myCarousel">
		<div class="carousel-inner">
			<div class="item">
				<ul class="span12">
					<img alt="" src="{{STATIC_URL}}img/diyiye.png" class="span3">
					<img alt="" src="{{STATIC_URL}}img/diyiye.png" class="span3">
					<img alt="" src="{{STATIC_URL}}img/diyiye.png" class="span3">
					<img alt="" src="{{STATIC_URL}}img/diyiye.png" class="span3">
				</ul>
			</div>

			<div class="item active">
				<ul class="span12">
					<img alt="" src="{{STATIC_URL}}img/dierye.png" class="span3">
					<img alt="" src="{{STATIC_URL}}img/dierye.png" class="span3">
					<img alt="" src="{{STATIC_URL}}img/diyiye.png" class="span3">
					<img alt="" src="{{STATIC_URL}}img/diyiye.png" class="span3">
				</ul>
			</div>

			<div class="item">
				<ul class="span12">
					<img alt="" src="{{STATIC_URL}}img/diyiye.png" class="span3">
					<img alt="" src="{{STATIC_URL}}img/diyiye.png" class="span3">
					<img alt="" src="{{STATIC_URL}}img/diyiye.png" class="span3">
					<img alt="" src="{{STATIC_URL}}img/diyiye.png" class="span3">
				</ul>
			</div>
		</div>
		<a data-slide="prev" href="#myCarousel" class="left carousel-control" style="top: 556px;">‹</a>
		<a data-slide="next" href="#myCarousel" class="right carousel-control" style="top: 556px;">›</a>
	</div>
</div>
{%endblock%}

{%block otherbody%}
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
			×
		</button>
		<h3 id="myModalLabel">注册</h3>
	</div>
	<div class="modal-body" style="
	margin-left: 120px;">
		<form class="span3" method="post">
			{% csrf_token %}
			<div id="warning">
				<div class="controls span3 " style="margin:0px;">
					<span style="color: red">*</span>
					<span>邮箱：</span>
					<input type="text" class="required" style="margin-bottom:20px;" placeholder="如：xxx@xx.com" id="id_email" name="email"/>
				</div>
			</div>
			<div id="error">
				<div class="controls span3" style="margin:0px;">
					<span style="color: red">*</span>
					<span>密码：</span>
					<input type="password" class="selecttwo" style="margin-bottom:20px;" placeholder="6到15位" id="id_password" name="password"/>
				</div>
			</div>
			<div id="r">
				<div class="controls span3" style="margin:0px;">
					<span style="color: red">*</span>
					<span>确认密码：</span>
					<input type="password" class="selecttwo" style="margin-bottom:20px;" placeholder="请确认密码" id="id_cpassword"/>
				</div>
			</div>
			<div class="control-group">
				<div class="controls">
					<span style="color: red">*</span>
					<span>真实姓名：</span>
					<input type="text" id="id_realname" name="realname" placeholder="请输入真实姓名"/>
				</div>
			</div>
			<div class="control-group">

				<div class="controls">
					<span style="color: red">*</span>
					<span>性别：</span>&nbsp;
					<input type="radio" name="gender" id="id_gender" value="男" checked>
					男</input>&nbsp;&nbsp;
					<input type="radio" name="gender" id="id_gender" value="女">
					女</input>
				</div>
			</div>
			<div>
				<input name="signup" type="hidden" />
				<button class="btn btn-large btn-primary check disabled" type="submit" style="width:220px;height:39px;" id="OK">
					注册
				</button>
			</div>
		</form>
	</div>
</div>
{%endblock%}

{%block otherscript%}
<script type="text/javascript">
	var reg = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
	var mi = /^[A-Za-z0-9_]{6,15}$/;

	$(document).ready(function() {
		var dataValid1 = false;
		var dataValid2 = false;
		var dataValid3 = false;
		$('#info').html('');
		//然后将结果提示也设置为空；
		$('#id_email').blur(function() {//对于required类的元素，如果失去焦点了，则....
			var cur = $(this);
			//获取当前元素
			cur.next('span').remove();
			//然后将错题提示的<span>给移走，不管他之前是什么；
			if (!reg.test(cur.val())) {//判断如果输入为空；
				$('#warning').addClass("control-group error");
				cur.after('<span class="error alert  alert-error span3" style="width:170px;margin-left:0px;" >邮箱格式不正确</span>');
				//则在输入框后添加错题提示信息；
				$('.check').addClass("disabled");
				dataValid1 = false;
			} else {
				dataValid = true;

				$('#warning').removeClass("control-group error");
				dataValid1 = true;
				if (dataValid1 == true && dataValid2 == true && dataValid3 == true)
					$('.check').removeClass("disabled");
			}
		});

		$('.selecttwo').blur(function() {
			var password = $('#id_password');
			var cpassword = $('#id_cpassword');
			$('#error').removeClass("control-group error");
			password.next('span').remove();
			$('#r').removeClass("control-group error");
			cpassword.next('span').remove();

			if (!mi.test(password.val())) {
				$('#error').addClass("control-group error");
				password.after('<span class="error alert alert-error span3" style="width:170px;margin-left:0px;" >密码必须超六位</span>');
				$('#OK').addClass("disabled");
				dataValid2 = false;
			} else {

				dataValid2 = true;
				if (password.val() != cpassword.val()) {
					$('#r').addClass("control-group error");
					cpassword.after('<span class="error alert alert-error span3" style="width:170px;margin-left:0px;" id="differen_input">俩次输入密码不符合</span>');
					$('#OK').addClass("disabled");
					dataValid3 = false;

				} else {
					dataValid3 = true;
					if (dataValid1 == true && dataValid2 == true && dataValid3 == true) {
						$('#OK').removeClass("disabled");
					}
				}
			}

		});

	}); 
</script>

{%endblock%}